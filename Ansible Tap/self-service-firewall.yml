---
- name: Open port a port for Firewalld
  hosts: all
  become: yes

  tasks:
    - name: Open port
      ansible.posix.firewalld:
        port:  "{{ portnumber }}/{{ proto }}"
        permanent: yes
        state: enabled
      notify:
        - Restart firewalld

  handlers:
    - name: Restart firewalld
      ansible.builtin.shell: systemctl firewalld restart && firewall-cmd --list-all
